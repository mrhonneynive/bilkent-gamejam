{"version":3,"file":"index-DhDzVixw.js","sources":["../../src/main.js"],"sourcesContent":["import kaplay from \"kaplay\";\nimport \"kaplay/global\"; // uncomment if you want to use without the prefix\nkaplay({\n  width: 1280,\n  height: 720,\n  letterbox: true,\n  debug: true,\n});\n\nloadRoot(\"./\");\n\nscene(\"menu\", () => {\n  const screenWidth = 1280;\n  const buttonX = screenWidth / 2; // Butonları yatayda ortalamak için\n\n  add([\n    text(\"Welcome to the game!\", { size: 48 }),\n    pos(buttonX - 270, 100), // Yazıyı butonlardan yukarı koyuyoruz\n    color(0, 0, 0), // Beyaz renk\n  ]);\n\n  addButton(\"Start\", vec2(buttonX, 400), () => go(\"game\"));\n  addButton(\"Quit\", vec2(buttonX, 500), () => debug.log(\"bye\"));\n});\n\nscene(\"game\", () => {\n  loadSprite(\"player\", \"sprites/player.png\", {\n    sliceX: 4,\n    sliceY: 6,\n    anims: {\n      idle: { from: 0, to: 3, speed: 5, loop: true },\n      run: {\n        from: 4,\n        to: 7,\n        loop: true,\n      },\n      \"jump-up\": 8,\n      \"jump-down\": 9,\n      // Optionally, if you add sliding frames:\n      // slide: { from: 10, to: 12, speed: 10, loop: false },\n    },\n  });\n\n  const SPEED = 480;\n  const JUMP_FORCE = 300;\n  const SLIDE_SPEED = SPEED * 1.5; // extra speed for slide\n  const SLIDE_DURATION = 0.3; // slide lasts 0.3 seconds\n\n  setGravity(640);\n\n  const player = add([\n    sprite(\"player\"),\n    pos(center()),\n    anchor(\"center\"),\n    area(),\n    body(),\n  ]);\n\n  player.play(\"idle\");\n  // Custom property to track if the player is sliding\n  player.isSliding = false;\n\n  // Update the camera position each frame\n  player.onUpdate(() => {\n    setCamPos(player.worldPos());\n  });\n\n  // Also update camera position when physics are resolved\n  player.onPhysicsResolve(() => {\n    setCamPos(player.worldPos());\n  });\n\n  // When the player is on the ground, switch animations (unless sliding)\n  player.onGround(() => {\n    if (!isKeyDown(\"left\") && !isKeyDown(\"right\") && !player.isSliding) {\n      player.play(\"idle\");\n    } else if (!player.isSliding) {\n      player.play(\"run\");\n    }\n  });\n\n  player.onAnimEnd((anim) => {\n    if (anim === \"idle\") {\n      // Example: you can trigger something when the idle animation ends.\n    }\n  });\n\n  onKeyPress(\"space\", () => {\n    if (player.isGrounded()) {\n      player.jump(JUMP_FORCE);\n      player.play(\"jump-up\");\n    }\n  });\n\n  // Normal left/right movement – disable these if sliding is active\n  onKeyDown(\"left\", () => {\n    if (!player.isSliding) {\n      player.move(-SPEED, 0);\n      player.flipX = true;\n      if (player.isGrounded() && player.getCurAnim().name !== \"run\") {\n        player.play(\"run\");\n      }\n    }\n  });\n\n  onKeyDown(\"right\", () => {\n    if (!player.isSliding) {\n      player.move(SPEED, 0);\n      player.flipX = false;\n      if (player.isGrounded() && player.getCurAnim().name !== \"run\") {\n        player.play(\"run\");\n      }\n    }\n  });\n\n  [\"left\", \"right\"].forEach((key) => {\n    onKeyRelease(key, () => {\n      if (\n        player.isGrounded() &&\n        !isKeyDown(\"left\") &&\n        !isKeyDown(\"right\") &&\n        !player.isSliding\n      ) {\n        player.play(\"idle\");\n      }\n    });\n  });\n\n  // SLIDING MECHANIC\n  onKeyPress(\"down\", () => {\n    // Yerde olup sağa ya da sola gidiyorsa ve şu anda kaymıyorsa kaymaya başla\n    if (\n      player.isGrounded() &&\n      (isKeyDown(\"left\") || isKeyDown(\"right\")) &&\n      !player.isSliding\n    ) {\n      player.isSliding = true;\n      player.scale.y = 0.5; // Kayma efektini vermek için sprite'ı sıkıştır\n\n      // Hangi yöne bakıyorsa o yöne doğru kaymasını sağla\n      const direction = player.flipX ? -1 : 1;\n\n      // Kayma hareketini başlat\n      const slideAction = action(() => {\n        player.move(direction * SLIDE_SPEED, 0);\n      });\n\n      // Belirtilen süre sonra kaymayı bitir\n      wait(SLIDE_DURATION, () => {\n        slideAction.cancel(); // Kaymayı durdur\n        player.isSliding = false;\n        player.scale.y = 1; // Sprite'ı eski haline getir\n\n        // Eğer hala hareket ediyorsa koşma animasyonuna geç, değilse dur\n        if (player.isGrounded() && (isKeyDown(\"left\") || isKeyDown(\"right\"))) {\n          player.play(\"run\");\n        } else {\n          player.play(\"idle\");\n        }\n      });\n    }\n  });\n\n  // Add a floor\n  add([\n    rect(width(), 24),\n    area(),\n    outline(1),\n    pos(0, height()),\n    body({ isStatic: true }),\n  ]);\n});\n\ngo(\"menu\");\n\nfunction addButton(\n  txt = \"start game\",\n  p = vec2(200, 100),\n  f = () => debug.log(\"hello\")\n) {\n  // add a parent background object\n  const btn = add([\n    rect(240, 80, { radius: 8 }),\n    pos(p),\n    area(),\n    scale(1),\n    anchor(\"center\"),\n    outline(4),\n    color(255, 255, 255),\n  ]);\n\n  // add a child object that displays the text\n  btn.add([text(txt), anchor(\"center\"), color(0, 0, 0)]);\n\n  // onHoverUpdate() comes from area() component\n  // it runs every frame when the object is being hovered\n  btn.onHoverUpdate(() => {\n    const t = time() * 10;\n    btn.color = hsl2rgb((t / 10) % 1, 0.6, 0.7);\n    btn.scale = vec2(1.2);\n    setCursor(\"pointer\");\n  });\n\n  // onHoverEnd() comes from area() component\n  // it runs once when the object stopped being hovered\n  btn.onHoverEnd(() => {\n    btn.scale = vec2(1);\n    btn.color = rgb();\n  });\n\n  // onClick() comes from area() component\n  // it runs once when the object is clicked\n  btn.onClick(f);\n\n  return btn;\n}\n"],"names":["kaplay","addButton","SPEED","JUMP_FORCE","SLIDE_SPEED","SLIDE_DURATION","player","anim","key","direction","slideAction","txt","p","f","btn","t"],"mappings":"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"}