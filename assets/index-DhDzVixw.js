import{E as c}from"./kaplay-C29j1WsK.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();c({width:1280,height:720,letterbox:!0,debug:!0});loadRoot("./");scene("menu",()=>{add([text("Welcome to the game!",{size:48}),pos(370,100),color(0,0,0)]),l("Start",vec2(640,400),()=>go("game")),l("Quit",vec2(640,500),()=>debug.log("bye"))});scene("game",()=>{loadSprite("player","sprites/player.png",{sliceX:4,sliceY:6,anims:{idle:{from:0,to:3,speed:5,loop:!0},run:{from:4,to:7,loop:!0},"jump-up":8,"jump-down":9}});const r=480,i=300,n=r*1.5,t=.3;setGravity(640);const e=add([sprite("player"),pos(center()),anchor("center"),area(),body()]);e.play("idle"),e.isSliding=!1,e.onUpdate(()=>{setCamPos(e.worldPos())}),e.onPhysicsResolve(()=>{setCamPos(e.worldPos())}),e.onGround(()=>{!isKeyDown("left")&&!isKeyDown("right")&&!e.isSliding?e.play("idle"):e.isSliding||e.play("run")}),e.onAnimEnd(o=>{}),onKeyPress("space",()=>{e.isGrounded()&&(e.jump(i),e.play("jump-up"))}),onKeyDown("left",()=>{e.isSliding||(e.move(-480,0),e.flipX=!0,e.isGrounded()&&e.getCurAnim().name!=="run"&&e.play("run"))}),onKeyDown("right",()=>{e.isSliding||(e.move(r,0),e.flipX=!1,e.isGrounded()&&e.getCurAnim().name!=="run"&&e.play("run"))}),["left","right"].forEach(o=>{onKeyRelease(o,()=>{e.isGrounded()&&!isKeyDown("left")&&!isKeyDown("right")&&!e.isSliding&&e.play("idle")})}),onKeyPress("down",()=>{if(e.isGrounded()&&(isKeyDown("left")||isKeyDown("right"))&&!e.isSliding){e.isSliding=!0,e.scale.y=.5;const o=e.flipX?-1:1,s=action(()=>{e.move(o*n,0)});wait(t,()=>{s.cancel(),e.isSliding=!1,e.scale.y=1,e.isGrounded()&&(isKeyDown("left")||isKeyDown("right"))?e.play("run"):e.play("idle")})}}),add([rect(width(),24),area(),outline(1),pos(0,height()),body({isStatic:!0})])});go("menu");function l(r="start game",i=vec2(200,100),n=()=>debug.log("hello")){const t=add([rect(240,80,{radius:8}),pos(i),area(),scale(1),anchor("center"),outline(4),color(255,255,255)]);return t.add([text(r),anchor("center"),color(0,0,0)]),t.onHoverUpdate(()=>{const e=time()*10;t.color=hsl2rgb(e/10%1,.6,.7),t.scale=vec2(1.2),setCursor("pointer")}),t.onHoverEnd(()=>{t.scale=vec2(1),t.color=rgb()}),t.onClick(n),t}
//# sourceMappingURL=index-DhDzVixw.js.map
